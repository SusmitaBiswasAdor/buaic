{% extends 'base.html' %} {% block title %}Results of polls{% endblock %} {%
block content %}
<div class="container mx-auto mt-8 flex justify-center items-center">
  <div class="bg-white p-8 shadow-md rounded-md w-96">
    <h1 class="text-3xl font-bold mb-6">Poll result</h1>

    <div>
      <canvas id="pollChart"></canvas>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const dataBarHorizontal = {
      type: 'bar',
      data: {
        labels: [{% for option in options %}"{{ option }}",{% endfor %}],
        datasets: [
          {
            label: 'Votes',
            data: [{% for option in options %}{{ votes[option] }},{% endfor %}],
          },
        ],
      },
    };

    const optionsBarHorizontal = {
      indexAxis: 'y',
      scales: {
        x: {
          stacked: true,
          grid: {
            display: true,
            borderDash: [2],
            zeroLineColor: 'rgba(0,0,0,0)',
            zeroLineBorderDash: [2],
            zeroLineBorderDashOffset: [2],
          },
          ticks: {
            color: 'rgba(0,0,0, 0.5)',
          },
        },
        y: {
          stacked: true,
          grid: {
            display: false,
          },
          ticks: {
            color: 'rgba(0,0,0, 0.5)',
          },
        },
      },
    };

    var ctx = document.getElementById('pollChart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: dataBarHorizontal.type,
      data: dataBarHorizontal.data,
      options: optionsBarHorizontal,
    });
  });
</script>

{% endblock %}
